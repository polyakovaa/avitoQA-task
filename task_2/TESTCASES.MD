# Тест-Кейсы к заданию 2


## Сохранение объявлений (save_item_test.go)

**Эндпоинт:** POST /api/1/item

### TestSaveItem_Positive

Создание объявления с валидными данными

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com

Уникальный sellerID в диапазоне 111111-999999

##### Шаги:
1. Подготовить тело запроса:
```json
    {
    "sellerID": 123456,
    "name": "телефон",
    "price": 700,
    "statistics": {
        "likes": 0,
        "viewCount": 14,
        "contacts": 32
        }
    }
```
    
2. Отправить POST запрос на /api/1/item

#### Ожидаемый результат:

Статус-код: 200

Тело ответа содержит:

    Поле id (не пустое, тип string)
    Поле sellerId соответствует отправленному sellerID
    Поле name соответствует отправленному значению
    Поле price соответствует отправленному значению
    Поле createdAt (не пустое, тип string)
    Поле statistics - объект, соответствует отправленному значению

### TestSaveItem_InvalidPrice

Сохранение объявлений с невалидным значением price

##### Предусловие:

Сервер доступен по адресу https://qa-internship.avito.com

Уникальный sellerID в диапазоне 111111-999999

##### Шаги:

1. Проверка price < 0
2. Проверка price = 0
3. Проверка price nil

#### Ожидаемый результат:

Status Code: 400
(Тест negative price пропускается из-за бага, см. BUGS.md)

### TestSaveItem_InvalidStatistics

Сохранение объявлений с невалидным значением statistics

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com

Уникальный sellerID в диапазоне 111111-999999

##### Шаги:

1. Проверка likes < 0
2. Проверка viewCount < 0
3. Проверка contacts < 0
4. Проверка nil likes
5. Проверка nil statistics

#### Ожидаемый результат:

Статус-код: 400


---

## Получение объявления по id (test_item_by_id.go)

**Эндпоинт:**  GET /api/1/item/{id} 

### TestGetItemByID_Positive

Получение объявления с валидным id

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com

Существует заранее известный корректный объект c itemID

##### Шаги:

1. Использовать для запроса валидный itemID
2. Сделать GET по этому ID
3. Проверить поля ответа на пустые значения, ноль и nil
    statistics может быть nil
    Если statistics не nil, то вложенные поля likes, viewCount, contacts не должны быть nil


#### Ожидаемый результат:

Статус-код: 200

Ответ содержит массив из одного объекта с полями:

    Поле id
    Поле sellerId
    Поле name
    Поле price 
    Поле createdAt
    Поле statistics - объект


### TestGetItemByID_NotFound

Несуществующее объявление

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com

Сгенерирован uuid, для которого объявление отсутствует

##### Шаги:

1. Сгенерировать uuid
2. Отправить GET запрос на /api/1/item/{id}

#### Ожидаемый результат:

Статус-код: 404

Тело ответа вида:
```json
"result": {
        "message": "item debb6473-0cc5-4204-9f72-f31534f6f03f not found",
        "messages": null
    },
    "status": "404"
```

### TestGetItemByID_InvalidID

Попытка получить объявление по невалидному id 

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com


##### Шаги:

1. Проверка слйучая integer id
2. Проверка случая string, но не uuid
3. Проверка  случая uuid, но с лишними символами
4. Проверка пустого id

#### Ожидаемый результат:

Статус-код: 400

API возвращает сообщение об ошибке в формате 400

---

## Получение всех объявлений по sellerID (test_item_by_seller.go)
**Эндпоинт:** GET /api/1/{sellerID}/item

### TestGetSellerItem_Positive

Получение объявлений валидного sellerID

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com

Уникальный sellerID в диапазоне 111111-999999

##### Шаги:

1. Сделать POST запрос с валидным сгенерированным sellerID
2. Сделать GET запрос объявлений для данного sellerID
3. Проверить корректность формата даты 
4. Проверить совпадение ожидаемых и полученных значений полей name, price
5. Если поле статистики не nil, проверить совпадение полей viewCount, likes, contacts

#### Ожидаемый результат:

Статус-код: 200

Обязательные поля присутсвуют и совпадают с ожидаемыми

### TestGetSellerItem_Empty

Проверка на продавца, у которого нет объявлений

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com

Уникальный sellerID в диапазоне 111111-999999

##### Шаги:

1. Сделать GET запрос объявлений для данного sellerID

2. Проверить, что массив результата пустой


#### Ожидаемый результат:

Статус-код: 200

Пустой массив объектов item


### TestGetSellerItem_InvalidSellerID

Проверка невалидных значений sellerID

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com


##### Шаги:

1. Проверка sellerId = 0
2. Проверка sellerId < 0
3. Проверка слишком большого числового значения sellerId 



#### Ожидаемый результат:

Статус-код: 400

API возвращает сообщение об ошибке в формате 400

---

## Получение статистики объявления (test_get_statistics.go)
**Эндпоинт:** GET /api/1/statistic/{id}

### TestGetStatistics_Positive

Получение статистики для валидного объявления

##### Предусловие:
Сервер доступен по адресу https://qa-internship.avito.com

id объявления существует

##### Шаги:

1. Сделать GET запрос для валидного id(например "ab0f3148-4d0e-479f-9f26-cebe00aa8047")

#### Ожидаемый результат:

Статус-код: 200

Обязательные поля statistic присутсвуют:
    Поле likes
    Поле contacts
    Поле viewCount


### TestGetStatistics_NotFound

Получение статистики по несуществующему объявлению

##### Предусловие:

Сервер доступен по адресу https://qa-internship.avito.com

##### Шаги:

1. Сделать GET запрос для несуществующего id (сгенерировать случайный)
2. Проверить структуру ответа - по Swagger тело содержит JSON с полями result и status

#### Ожидаемый результат:

1. Статус-код: 404

2. Ответ вида 
```json
{
    "result": {
        "message": "statistic ab0f3148-4d0e-479f-9f26-cebe01aa8047 not found",
        "messages": null
    },
    "status": "404"
}
```

### TestGetStatistics_InvalidID


##### Предусловие:

Сервер доступен по адресу https://qa-internship.avito.com

##### Шаги:

1. Проверка id типа integer
2. Проверка id типа string, но не uuid
3. Проверка  случая uuid, но с лишними символами
4. Проверка пустого id


#### Ожидаемый результат:

Статус-код: 400

API возвращает сообщение об ошибке в формате 400
