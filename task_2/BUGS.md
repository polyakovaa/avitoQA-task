# Баг-репорты

## bug_1 (Сохранение объявления) Отправка likes=0 приводит к ошибке "поле обязательно"
**Эндпоинт:** POST /api/1/item


**Шаги для воспроизведения:**

1. Отправить POST запрос на /api/1/item
2. Объект должен быть валидным:

- likes = 0

- viewCount > 0

- contacts > 0

**Ожидаемый результат:**

- Статус-код 200 

- Сервер принимает значение 0 (так как 0 — корректный integer)

**Фактический результат:**

- Статус-код 400 

- Сообщение "поле likes обязательно"

**Проблема:**

Поле присутствует, но сервер считает его отсутствующим



## bug_2 (Сохранение объявления) Успешный ответ не соответсвует схеме в Swagger

**Эндпоинт:** POST /api/1/item

**Шаги для воспроизведения:**

1. Отправить POST запрос на /api/1/item
2. Объект должен быть валидным:
likes > 0
viewCount > 0
contacts > 0

**Ожидаемый результат:**

Полный объект объявления по Swagger:
```json
{
  "id": "...",
  "sellerId": 123456,
  "name": "текст",
  "price": 700,
  "createdAt": "2025-11-23T10:00:00Z",
  "statistics": {
    "likes": 1,
    "viewCount": 1,
    "contacts": 1
  }
}
```

**Фактический результат:**

{"status":"Сохранили объявление - UUID"}

**Проблема:**

Ответ не содержит обязательных полей (id, sellerId, name, price, createdAt, statistics). Формат JSON отличается от описанного в Swagger


## bug_3 (Сохранение объявления) API принимает price <=0 при сохранении объявления

**Эндпоинт:** POST /api/1/item

**Шаги для воспроизведения:**

1. Отправить POST запрос на /api/1/item с json вида 
```json
 {
       "sellerId": 123456,
       "name": "телефон",
       "price": -100,
       "statistics": {"likes": 1, "viewCount": 1, "contacts": 1}
   }
```
с отрицательной или нулевой ценой

**Ожидаемый результат:**

- Статус-код 400 для отрицательной цены

- Статус-код 200 для нулевой цены 

 
**Фактический результат:**

- Статус-код 200 для отрицательной цены

- Статус-код 400 для нулевой цены

**Проблема:**

API не валидирует отрицательное значение price 

**Примечание**

Возможно 0 валидно для бесплатного объявления, зависит от бизнес-логики


## bug_4 (Сохранение объявления) API не валидирует отрицательные значения в поле statistics

**Эндпоинт:** POST /api/1/item

**Шаги для воспроизведения:**

1. Отправить POST запрос на /api/1/item с json вида 
```json
{
    "sellerID": 123,
    "name": "item",
    "price": 1,
    "statistics": {
        "likes": -1,
        "viewCount": 1,
        "contacts": 1
    }
}
```

**Ожидаемый результат:**

- Статус код 400

- Ошибка о некорректном значении поля

 
**Фактический результат:**

- Статус код 400

- Объявление создаётся несмотря на некорректные данные

**Проблема:**

При передаче отрицательных значений в полях statistics.likes, statistics.viewCount, statistics.contacts, API возвращает 200, хотя согласно документации ожидается 400.


## bug_5 (получение объявлений по sellerID) Некорректные значения sellerID не вызывают ошибку 400, несмотря на описание в Swagger

**Эндпоинт:** GET /api/1/{sellerID}/item

**Шаги для воспроизведения:**

1. Выполнить запрос GET /api/1/-100/item

2. Получить статус-код 200 OK

**Ожидаемый результат:**

- Статус код: 400

- Тело ответа соответствует схеме 400 из Swagger

**Фактический результат:**

API возвращает 200 OK с пустым массивом при передаче следующих значений:

- sellerID = -100

- sellerID = 0

- sellerID = 999999999999

- sellerID типа string

**Примечание**

Возможно 0 валидно для sellerID 

## bug_5 (Получение статистики) Пустой id возвращает 404 вместо 400

**Эндпоинт:**  GET /api/1/statistic/{id}

**Шаги для воспроизведения:**

1. Выполнить запрос GET /api/1/statistic/ 

2. Получить статус-код 404 с сообщением {"code": 400, "message": "route /api/1/statistic/ not found"}



**Ожидаемый результат:**

- Статус-код: 400

- Body: `{"code": 400, "message": "..."}`

**Фактический результат:**

- Статус-код: 404

- Body: `{"code": 400, "message": "..."}`

**Проблема:**

По смыслу пустой id - ошибка запроса пользователя, а не поиска. Код в теле ответа не соответсвует фактическому HTTP статусу


